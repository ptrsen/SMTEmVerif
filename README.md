# SMTEmVerif

This repository contains the code for the graphs, and properties as described in [PLK+20]. The properties can be found on the [properties](/properties/) folder, while some examples of generated (static instances) graphs can be found on the [graphs](/graphs/) folder.

As an example, consider the following graph:

![Example Graph](/figures/example.jpg)

This graph has the SMT-LIB following representation:

``` {.dot language="dot"}
(declare-datatypes () ((Edge (mk-edge (src String) (dst String))))) ; to have a type edge to manipulate, Edge is from the record (tuple) theory 
(declare-fun delay ((Edge)) Int) ;a function must be provided or later a restriction that the function must return > 0 
(declare-fun bandwidth ((Edge)) Int)  ; a function must be provided or later a restriction that the function must return > 0 
(declare-const edges (Array Int Edge)) ; an array of edges  
(declare-const nodes (Array Int String)) ; an array of nodes 
(declare-fun edges_size () Int) ; a function must be provided or later a restriction that the function must return > 0 
(declare-fun nodes_size () Int) 
(assert (> edges_size 0) ) ; a restriction on the edge size that must be greater than 0 
(assert (> nodes_size 0) ) 
;; end of initial configuration, starts specific graph configs 
(assert (= (store nodes 1 "n1") nodes))
(assert (= (store nodes 2 "n2") nodes))
(assert (= (store nodes 3 "n3") nodes))
(assert (= (store nodes 4 "n4") nodes))
(assert (= (store nodes 5 "n5") nodes))
(assert (= (store nodes 6 "n6") nodes))
(assert (= (store nodes 7 "n7") nodes))
(assert (= (store nodes 8 "n8") nodes))
(assert (= (store nodes 9 "n9") nodes))
(assert (= (store nodes 10 "n10") nodes))
(assert (= (store nodes 11 "n11") nodes))
(assert (= nodes_size 11)) 
(assert (= (store edges 1 (mk-edge "n1" "n4")) edges)) 
(assert (= 1658371 (bandwidth (select edges 1)) ) )
(assert (= 17 (delay (select edges 1)) ) )
(assert (= (store edges 2 (mk-edge "n1" "n6")) edges)) 
(assert (= 1669890 (bandwidth (select edges 2)) ) )
(assert (= 17 (delay (select edges 2)) ) )
(assert (= (store edges 3 (mk-edge "n1" "n8")) edges)) 
(assert (= 890793 (bandwidth (select edges 3)) ) )
(assert (= 9 (delay (select edges 3)) ) )
(assert (= (store edges 4 (mk-edge "n1" "n9")) edges)) 
(assert (= 3800826 (bandwidth (select edges 4)) ) )
(assert (= 39 (delay (select edges 4)) ) )
(assert (= (store edges 5 (mk-edge "n1" "n10")) edges)) 
(assert (= 9723974 (bandwidth (select edges 5)) ) )
(assert (= 98 (delay (select edges 5)) ) )
(assert (= (store edges 6 (mk-edge "n1" "n11")) edges)) 
(assert (= 93585 (bandwidth (select edges 6)) ) )
(assert (= 1 (delay (select edges 6)) ) )
(assert (= (store edges 7 (mk-edge "n2" "n3")) edges)) 
(assert (= 1620722 (bandwidth (select edges 7)) ) )
(assert (= 17 (delay (select edges 7)) ) )
(assert (= (store edges 8 (mk-edge "n2" "n7")) edges)) 
(assert (= 1976485 (bandwidth (select edges 8)) ) )
(assert (= 20 (delay (select edges 8)) ) )
(assert (= (store edges 9 (mk-edge "n2" "n8")) edges)) 
(assert (= 89830 (bandwidth (select edges 9)) ) )
(assert (= 1 (delay (select edges 9)) ) )
(assert (= (store edges 10 (mk-edge "n2" "n10")) edges)) 
(assert (= 1063786 (bandwidth (select edges 10)) ) )
(assert (= 11 (delay (select edges 10)) ) )
(assert (= (store edges 11 (mk-edge "n2" "n11")) edges)) 
(assert (= 1598768 (bandwidth (select edges 11)) ) )
(assert (= 16 (delay (select edges 11)) ) )
(assert (= (store edges 12 (mk-edge "n3" "n4")) edges)) 
(assert (= 13078220 (bandwidth (select edges 12)) ) )
(assert (= 131 (delay (select edges 12)) ) )
(assert (= (store edges 13 (mk-edge "n3" "n9")) edges)) 
(assert (= 7054060 (bandwidth (select edges 13)) ) )
(assert (= 71 (delay (select edges 13)) ) )
(assert (= (store edges 14 (mk-edge "n3" "n11")) edges)) 
(assert (= 9193285 (bandwidth (select edges 14)) ) )
(assert (= 92 (delay (select edges 14)) ) )
(assert (= (store edges 15 (mk-edge "n4" "n5")) edges)) 
(assert (= 630825 (bandwidth (select edges 15)) ) )
(assert (= 7 (delay (select edges 15)) ) )
(assert (= (store edges 16 (mk-edge "n4" "n6")) edges)) 
(assert (= 1510985 (bandwidth (select edges 16)) ) )
(assert (= 16 (delay (select edges 16)) ) )
(assert (= (store edges 17 (mk-edge "n4" "n7")) edges)) 
(assert (= 29162475 (bandwidth (select edges 17)) ) )
(assert (= 292 (delay (select edges 17)) ) )
(assert (= (store edges 18 (mk-edge "n4" "n8")) edges)) 
(assert (= 15360957 (bandwidth (select edges 18)) ) )
(assert (= 154 (delay (select edges 18)) ) )
(assert (= (store edges 19 (mk-edge "n4" "n9")) edges)) 
(assert (= 57597 (bandwidth (select edges 19)) ) )
(assert (= 1 (delay (select edges 19)) ) )
(assert (= (store edges 20 (mk-edge "n4" "n10")) edges)) 
(assert (= 4681370 (bandwidth (select edges 20)) ) )
(assert (= 47 (delay (select edges 20)) ) )
(assert (= (store edges 21 (mk-edge "n5" "n1")) edges)) 
(assert (= 1045759 (bandwidth (select edges 21)) ) )
(assert (= 11 (delay (select edges 21)) ) )
(assert (= (store edges 22 (mk-edge "n5" "n3")) edges)) 
(assert (= 4676213 (bandwidth (select edges 22)) ) )
(assert (= 47 (delay (select edges 22)) ) )
(assert (= (store edges 23 (mk-edge "n5" "n9")) edges)) 
(assert (= 278371 (bandwidth (select edges 23)) ) )
(assert (= 3 (delay (select edges 23)) ) )
(assert (= (store edges 24 (mk-edge "n5" "n10")) edges)) 
(assert (= 9998889 (bandwidth (select edges 24)) ) )
(assert (= 100 (delay (select edges 24)) ) )
(assert (= (store edges 25 (mk-edge "n6" "n1")) edges)) 
(assert (= 1204807 (bandwidth (select edges 25)) ) )
(assert (= 13 (delay (select edges 25)) ) )
(assert (= (store edges 26 (mk-edge "n6" "n3")) edges)) 
(assert (= 8868209 (bandwidth (select edges 26)) ) )
(assert (= 89 (delay (select edges 26)) ) )
(assert (= (store edges 27 (mk-edge "n6" "n5")) edges)) 
(assert (= 717285 (bandwidth (select edges 27)) ) )
(assert (= 8 (delay (select edges 27)) ) )
(assert (= (store edges 28 (mk-edge "n6" "n7")) edges)) 
(assert (= 298745 (bandwidth (select edges 28)) ) )
(assert (= 3 (delay (select edges 28)) ) )
(assert (= (store edges 29 (mk-edge "n7" "n2")) edges)) 
(assert (= 1400852 (bandwidth (select edges 29)) ) )
(assert (= 15 (delay (select edges 29)) ) )
(assert (= (store edges 30 (mk-edge "n7" "n3")) edges)) 
(assert (= 3075399 (bandwidth (select edges 30)) ) )
(assert (= 31 (delay (select edges 30)) ) )
(assert (= (store edges 31 (mk-edge "n7" "n10")) edges)) 
(assert (= 9923090 (bandwidth (select edges 31)) ) )
(assert (= 100 (delay (select edges 31)) ) )
(assert (= (store edges 32 (mk-edge "n8" "n1")) edges)) 
(assert (= 59885 (bandwidth (select edges 32)) ) )
(assert (= 1 (delay (select edges 32)) ) )
(assert (= (store edges 33 (mk-edge "n8" "n2")) edges)) 
(assert (= 2338635 (bandwidth (select edges 33)) ) )
(assert (= 24 (delay (select edges 33)) ) )
(assert (= (store edges 34 (mk-edge "n8" "n7")) edges)) 
(assert (= 496776 (bandwidth (select edges 34)) ) )
(assert (= 5 (delay (select edges 34)) ) )
(assert (= (store edges 35 (mk-edge "n8" "n9")) edges)) 
(assert (= 1433205 (bandwidth (select edges 35)) ) )
(assert (= 15 (delay (select edges 35)) ) )
(assert (= (store edges 36 (mk-edge "n8" "n11")) edges)) 
(assert (= 1006814 (bandwidth (select edges 36)) ) )
(assert (= 11 (delay (select edges 36)) ) )
(assert (= (store edges 37 (mk-edge "n9" "n2")) edges)) 
(assert (= 5589920 (bandwidth (select edges 37)) ) )
(assert (= 56 (delay (select edges 37)) ) )
(assert (= (store edges 38 (mk-edge "n9" "n4")) edges)) 
(assert (= 600142 (bandwidth (select edges 38)) ) )
(assert (= 7 (delay (select edges 38)) ) )
(assert (= (store edges 39 (mk-edge "n9" "n5")) edges)) 
(assert (= 11535084 (bandwidth (select edges 39)) ) )
(assert (= 116 (delay (select edges 39)) ) )
(assert (= (store edges 40 (mk-edge "n9" "n7")) edges)) 
(assert (= 1557364 (bandwidth (select edges 40)) ) )
(assert (= 16 (delay (select edges 40)) ) )
(assert (= (store edges 41 (mk-edge "n9" "n8")) edges)) 
(assert (= 10954440 (bandwidth (select edges 41)) ) )
(assert (= 110 (delay (select edges 41)) ) )
(assert (= (store edges 42 (mk-edge "n10" "n2")) edges)) 
(assert (= 8234107 (bandwidth (select edges 42)) ) )
(assert (= 83 (delay (select edges 42)) ) )
(assert (= (store edges 43 (mk-edge "n10" "n3")) edges)) 
(assert (= 8966537 (bandwidth (select edges 43)) ) )
(assert (= 90 (delay (select edges 43)) ) )
(assert (= (store edges 44 (mk-edge "n10" "n6")) edges)) 
(assert (= 156389 (bandwidth (select edges 44)) ) )
(assert (= 2 (delay (select edges 44)) ) )
(assert (= (store edges 45 (mk-edge "n10" "n8")) edges)) 
(assert (= 1648592 (bandwidth (select edges 45)) ) )
(assert (= 17 (delay (select edges 45)) ) )
(assert (= (store edges 46 (mk-edge "n10" "n9")) edges)) 
(assert (= 4183481 (bandwidth (select edges 46)) ) )
(assert (= 42 (delay (select edges 46)) ) )
(assert (= (store edges 47 (mk-edge "n11" "n1")) edges)) 
(assert (= 4237650 (bandwidth (select edges 47)) ) )
(assert (= 43 (delay (select edges 47)) ) )
(assert (= (store edges 48 (mk-edge "n11" "n2")) edges)) 
(assert (= 1207051 (bandwidth (select edges 48)) ) )
(assert (= 13 (delay (select edges 48)) ) )
(assert (= (store edges 49 (mk-edge "n11" "n5")) edges)) 
(assert (= 9059905 (bandwidth (select edges 49)) ) )
(assert (= 91 (delay (select edges 49)) ) )
(assert (= (store edges 50 (mk-edge "n11" "n7")) edges)) 
(assert (= 3934911 (bandwidth (select edges 50)) ) )
(assert (= 40 (delay (select edges 50)) ) )
(assert (= (store edges 51 (mk-edge "n11" "n9")) edges)) 
(assert (= 21788210 (bandwidth (select edges 51)) ) )
(assert (= 218 (delay (select edges 51)) ) )
(assert (= edges_size 51))
```

When combining a graph and a property, the [z3](https://github.com/Z3Prover/z3) solver can be used to verifiy such property. 

## References
[PLK+20] Erick Petersen, Jorge LÃ³pez, Natalia Kushik, Claude Poletti, Djamal Zeghlache: On using SMT-solvers for Modeling and Verifying Dynamic Network Emulators. CoRR abs/2009.10051 (2020), https://arxiv.org/abs/2009.10051
